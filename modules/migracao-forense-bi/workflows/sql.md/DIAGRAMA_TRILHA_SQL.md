# ğŸ“Š Diagrama Visual - Trilha SQL Especializada

## Fluxo Completo: ExtraÃ§Ã£o â†’ ValidaÃ§Ã£o â†’ AnÃ¡lise

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TRILHA SQL - FASE 1                                 â”‚
â”‚                    (Soberania SQL - 100% Banco de Dados)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PASSO 0: INGESTOR-A                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Input: bi14a.esf (arquivo Visual Age)                                      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚  â”‚  vamap.exe   â”‚  â† Compilador Oficial Visual Age                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ vamap_raw.log                                               â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ --- DATA DIVISION ---                                       â”‚           â”‚
â”‚  â”‚ 01 BANCOS.                                                  â”‚           â”‚
â”‚  â”‚    05 COD-BANCO        PIC X(10).                           â”‚           â”‚
â”‚  â”‚    05 NOME-BANCO       PIC X(100).                          â”‚           â”‚
â”‚  â”‚                                                             â”‚           â”‚
â”‚  â”‚ --- SQLCA ---                                               â”‚           â”‚
â”‚  â”‚ EXEC SQL DECLARE BANCOS TABLE                              â”‚           â”‚
â”‚  â”‚   (COD_BANCO CHAR(10), NOME_BANCO VARCHAR(100))            â”‚           â”‚
â”‚  â”‚ END-EXEC                                                    â”‚           â”‚
â”‚  â”‚                                                             â”‚           â”‚
â”‚  â”‚ Tabelas Detectadas: BANCOS, AGENCIAS, TRANSACOES           â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                             â”‚
â”‚  Status: âœ… Ã‚NCORA DA VERDADE ESTABELECIDA                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PASSO 1: EXTRACTOR-A [EXT-SQL]                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  MissÃ£o: ExtraÃ§Ã£o 100% SQL (Ignorar UI/Cores)                              â”‚
â”‚                                                                             â”‚
â”‚  âœ… FOCAR:                          âŒ IGNORAR:                             â”‚
â”‚  â€¢ EXEC SQL ... END-EXEC            â€¢ DefiniÃ§Ãµes de UI                     â”‚
â”‚  â€¢ DECLARE CURSOR                   â€¢ Cores e layouts                      â”‚
â”‚  â€¢ FETCH, OPEN, CLOSE               â€¢ Campos de tela                       â”‚
â”‚  â€¢ INSERT INTO                      â€¢ SCREEN, WINDOW, FORM                 â”‚
â”‚  â€¢ UPDATE ... SET                   â€¢ ValidaÃ§Ãµes de UI                     â”‚
â”‚  â€¢ DELETE FROM                                                             â”‚
â”‚  â€¢ SELECT ... INTO                                                         â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ CÃ³digo Visual Age (bi14a.esf)                              â”‚            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚  â”‚ L0500: EXEC SQL                                            â”‚            â”‚
â”‚  â”‚ L0501:   SELECT COD_BANCO, NOME_BANCO                      â”‚            â”‚
â”‚  â”‚ L0502:   FROM BANCOS WHERE ATIVO = 'S'                     â”‚            â”‚
â”‚  â”‚ L0503: END-EXEC                                            â”‚            â”‚
â”‚  â”‚                                                            â”‚            â”‚
â”‚  â”‚ L1500: EXEC SQL                                            â”‚            â”‚
â”‚  â”‚ L1501:   INSERT INTO BANCOS VALUES (:WS-COD, :WS-NOME)     â”‚            â”‚
â”‚  â”‚ L1502: END-EXEC                                            â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                         â”‚                                                  â”‚
â”‚                         â”‚ ExtraÃ§Ã£o SQL                                     â”‚
â”‚                         â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ claims_A_sql.json                                          â”‚            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚  â”‚ {                                                          â”‚            â”‚
â”‚  â”‚   "queries": [                                             â”‚            â”‚
â”‚  â”‚     {                                                      â”‚            â”‚
â”‚  â”‚       "query_id": "QRY-001",                               â”‚            â”‚
â”‚  â”‚       "query_type": "SELECT",                              â”‚            â”‚
â”‚  â”‚       "sql_statement": "SELECT ... FROM BANCOS ...",       â”‚            â”‚
â”‚  â”‚       "evidence_pointer": "bi14a.esf:L0500-L0503",         â”‚            â”‚
â”‚  â”‚       "affected_tables": ["BANCOS"],        â† NOVO         â”‚            â”‚
â”‚  â”‚       "operation_type": "READ"              â† NOVO         â”‚            â”‚
â”‚  â”‚     },                                                     â”‚            â”‚
â”‚  â”‚     {                                                      â”‚            â”‚
â”‚  â”‚       "query_id": "QRY-015",                               â”‚            â”‚
â”‚  â”‚       "query_type": "INSERT",                              â”‚            â”‚
â”‚  â”‚       "sql_statement": "INSERT INTO BANCOS ...",           â”‚            â”‚
â”‚  â”‚       "evidence_pointer": "bi14a.esf:L1500-L1502",         â”‚            â”‚
â”‚  â”‚       "affected_tables": ["BANCOS"],        â† NOVO         â”‚            â”‚
â”‚  â”‚       "operation_type": "CREATE"            â† NOVO         â”‚            â”‚
â”‚  â”‚     }                                                      â”‚            â”‚
â”‚  â”‚   ]                                                        â”‚            â”‚
â”‚  â”‚ }                                                          â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                             â”‚
â”‚  Outputs Gerados:                                                          â”‚
â”‚  âœ… run/extraction/claims_A_sql.json                                        â”‚
â”‚  âœ… run/extraction/sql_extraction_log.txt                                   â”‚
â”‚  âœ… run/extraction/sql_tables_summary.csv                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PASSO 2: VALIDATOR-A [VAL-SQL]                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  MissÃ£o: Cruzamento IA Ã— VAMAP (Conformidade 100%)                         â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ vamap_raw.log        â”‚         â”‚ claims_A_sql.json    â”‚                 â”‚
â”‚  â”‚ (Ã‚NCORA DA VERDADE)  â”‚         â”‚ (EXTRAÃ‡ÃƒO DA IA)     â”‚                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚  â”‚ Tabelas VAMAP:       â”‚         â”‚ Tabelas IA:          â”‚                 â”‚
â”‚  â”‚ â€¢ BANCOS             â”‚         â”‚ â€¢ BANCOS             â”‚                 â”‚
â”‚  â”‚ â€¢ AGENCIAS           â”‚         â”‚ â€¢ AGENCIAS           â”‚                 â”‚
â”‚  â”‚ â€¢ TRANSACOES         â”‚         â”‚ â€¢ TRANSACOES         â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚             â”‚                                â”‚                             â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                          â”‚                                                 â”‚
â”‚                          â–¼                                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚              â”‚  RULE-VAMAP-SQL       â”‚                                     â”‚
â”‚              â”‚  (ValidaÃ§Ã£o Cruzada)  â”‚                                     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                          â”‚                                                 â”‚
â”‚                          â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ VerificaÃ§Ãµes:                                           â”‚              â”‚
â”‚  â”‚                                                         â”‚              â”‚
â”‚  â”‚ 1. OmissÃµes = VAMAP tem, IA nÃ£o                        â”‚              â”‚
â”‚  â”‚    â†’ tabelas_vamap - tabelas_ia                        â”‚              â”‚
â”‚  â”‚    â†’ Resultado: [] (vazio) âœ…                           â”‚              â”‚
â”‚  â”‚                                                         â”‚              â”‚
â”‚  â”‚ 2. AlucinaÃ§Ãµes = IA tem, VAMAP nÃ£o                     â”‚              â”‚
â”‚  â”‚    â†’ tabelas_ia - tabelas_vamap                        â”‚              â”‚
â”‚  â”‚    â†’ Resultado: [] (vazio) âœ…                           â”‚              â”‚
â”‚  â”‚                                                         â”‚              â”‚
â”‚  â”‚ 3. Conformidade SQL                                    â”‚              â”‚
â”‚  â”‚    â†’ (intersecÃ§Ã£o / total_vamap) Ã— 100                 â”‚              â”‚
â”‚  â”‚    â†’ (3 / 3) Ã— 100 = 100% âœ…                            â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                          â”‚                                                 â”‚
â”‚                          â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ sql_gate_status.json                                    â”‚              â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚  â”‚ {                                                       â”‚              â”‚
â”‚  â”‚   "sql_gate_status": "PASS",                            â”‚              â”‚
â”‚  â”‚   "conformidade_sql_percentage": 100.0,                 â”‚              â”‚
â”‚  â”‚   "tabelas_vamap": ["BANCOS", "AGENCIAS", "TRANSACOES"],â”‚              â”‚
â”‚  â”‚   "tabelas_ia": ["BANCOS", "AGENCIAS", "TRANSACOES"],   â”‚              â”‚
â”‚  â”‚   "omissoes": [],                    â† Vazio = PASS     â”‚              â”‚
â”‚  â”‚   "alucinacoes": [],                 â† Vazio = PASS     â”‚              â”‚
â”‚  â”‚   "queries_validadas": 23,                              â”‚              â”‚
â”‚  â”‚   "queries_com_tabelas_validas": 23                     â”‚              â”‚
â”‚  â”‚ }                                                       â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â”‚  CritÃ©rio de FAIL:                                                         â”‚
â”‚  âŒ len(omissoes) > 0 â†’ FAIL                                                â”‚
â”‚  âŒ len(alucinacoes) > 0 â†’ FAIL                                             â”‚
â”‚  âŒ conformidade_sql < 100% â†’ FAIL                                          â”‚
â”‚                                                                             â”‚
â”‚  Outputs Gerados:                                                          â”‚
â”‚  âœ… run/extraction/sql_validation_report.md                                 â”‚
â”‚  âœ… run/extraction/sql_gate_status.json                                     â”‚
â”‚  âœ… run/extraction/sql_conformance_matrix.csv                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PASSO 3: ANALYZER-A [ANA-SQL]                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  MissÃ£o: Gerar Schema SQL + Linhagem de Dados                              â”‚
â”‚                                                                             â”‚
â”‚  Input: claims_A_sql.json (validado)                                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Processamento:                                         â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ 1. Agrupar queries por tabela                          â”‚                â”‚
â”‚  â”‚    BANCOS â†’ [QRY-001, QRY-015, QRY-018]                â”‚                â”‚
â”‚  â”‚    AGENCIAS â†’ [QRY-008, QRY-020]                       â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ 2. Identificar relacionamentos (FKs via JOINs)         â”‚                â”‚
â”‚  â”‚    AGENCIAS.cod_banco â†’ BANCOS.cod_banco               â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ 3. Mapear lÃ³gica â†’ tabela (via dependencies)           â”‚                â”‚
â”‚  â”‚    QRY-001 â†’ LOG-005 â†’ SCR-001                         â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ 4. Detectar padrÃµes de risco                           â”‚                â”‚
â”‚  â”‚    â€¢ SQL dinÃ¢mico                                      â”‚                â”‚
â”‚  â”‚    â€¢ Mass updates/deletes                              â”‚                â”‚
â”‚  â”‚    â€¢ Queries complexas (>= 5 JOINs)                    â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                          â”‚                                                 â”‚
â”‚                          â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ OUTPUT 1: database_schema.sql                          â”‚                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚  â”‚ -- DDL SQL Moderno                                     â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ CREATE TABLE bancos (                                  â”‚                â”‚
â”‚  â”‚     cod_banco VARCHAR(10) PRIMARY KEY,                 â”‚                â”‚
â”‚  â”‚     nome_banco VARCHAR(100) NOT NULL,                  â”‚                â”‚
â”‚  â”‚     ativo CHAR(1) DEFAULT 'S'                          â”‚                â”‚
â”‚  â”‚ );                                                     â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ CREATE TABLE agencias (                                â”‚                â”‚
â”‚  â”‚     cod_agencia VARCHAR(10) PRIMARY KEY,               â”‚                â”‚
â”‚  â”‚     cod_banco VARCHAR(10) NOT NULL,                    â”‚                â”‚
â”‚  â”‚     FOREIGN KEY (cod_banco)                            â”‚                â”‚
â”‚  â”‚         REFERENCES bancos(cod_banco)                   â”‚                â”‚
â”‚  â”‚ );                                                     â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ CREATE VIEW vw_bancos_ativos AS                        â”‚                â”‚
â”‚  â”‚ SELECT cod_banco, nome_banco                           â”‚                â”‚
â”‚  â”‚ FROM bancos WHERE ativo = 'S';                         â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                          â”‚                                                 â”‚
â”‚                          â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ OUTPUT 2: data_lineage_report.md                       â”‚                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚  â”‚ # Linhagem de Dados                                    â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ ## BANCOS                                              â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ ### OperaÃ§Ãµes:                                         â”‚                â”‚
â”‚  â”‚ â€¢ READ: QRY-001 (bi14a.esf:L0500)                      â”‚                â”‚
â”‚  â”‚   â””â”€ LÃ³gica: LOG-005 (validaÃ§Ã£o)                       â”‚                â”‚
â”‚  â”‚      â””â”€ Tela: SCR-001 (consulta)                       â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ â€¢ CREATE: QRY-015 (bi14a.esf:L1500)                    â”‚                â”‚
â”‚  â”‚   â””â”€ LÃ³gica: LOG-012 (duplicidade)                     â”‚                â”‚
â”‚  â”‚      â””â”€ Tela: SCR-003 (cadastro)                       â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ â€¢ UPDATE: QRY-018 (bi14a.esf:L1800)                    â”‚                â”‚
â”‚  â”‚   â””â”€ LÃ³gica: LOG-018 (auditoria)                       â”‚                â”‚
â”‚  â”‚      â””â”€ Tela: SCR-004 (inativar)                       â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ ### DependÃªncias Downstream:                           â”‚                â”‚
â”‚  â”‚ â€¢ AGENCIAS (FK cod_banco)                              â”‚                â”‚
â”‚  â”‚ â€¢ TRANSACOES (FK cod_banco)                            â”‚                â”‚
â”‚  â”‚                                                        â”‚                â”‚
â”‚  â”‚ ### Riscos:                                            â”‚                â”‚
â”‚  â”‚ ğŸ”´ HIGH: DELETE sem WHERE (bi14a.esf:L2105)            â”‚                â”‚
â”‚  â”‚ ğŸŸ¡ MEDIUM: UPDATE em loop (bi14a.esf:L1850)            â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                             â”‚
â”‚  Outputs Gerados:                                                          â”‚
â”‚  âœ… run/analysis/database_schema.sql                                        â”‚
â”‚  âœ… run/analysis/data_lineage_report.md                                     â”‚
â”‚  âœ… run/analysis/sql_risk_matrix.csv                                        â”‚
â”‚  âœ… run/analysis/table_dependencies_graph.json                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESULTADO FINAL: TRILHA SQL COMPLETA                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  âœ… ExtraÃ§Ã£o SQL 100% focada (sem ruÃ­do de UI)                              â”‚
â”‚  âœ… ValidaÃ§Ã£o IA Ã— VAMAP (conformidade 100%)                                â”‚
â”‚  âœ… Schema SQL moderno gerado                                               â”‚
â”‚  âœ… Linhagem de dados documentada                                           â”‚
â”‚  âœ… Riscos SQL identificados                                                â”‚
â”‚  âœ… Relacionamentos (FKs) mapeados                                          â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“Š MÃ©tricas:                                                               â”‚
â”‚  â€¢ Conformidade SQL: 100%                                                  â”‚
â”‚  â€¢ Queries validadas: 23                                                   â”‚
â”‚  â€¢ Tabelas mapeadas: 3 (BANCOS, AGENCIAS, TRANSACOES)                      â”‚
â”‚  â€¢ OmissÃµes: 0                                                             â”‚
â”‚  â€¢ AlucinaÃ§Ãµes: 0                                                          â”‚
â”‚                                                                             â”‚
â”‚  ğŸ¯ Status: TRILHA SQL CERTIFICADA                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ComparaÃ§Ã£o: Antes vs Depois

### ANTES (ExtraÃ§Ã£o GenÃ©rica)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [EXT] Extrair TUDO                   â”‚
â”‚                                      â”‚
â”‚ â€¢ UI (telas, campos, cores)          â”‚
â”‚ â€¢ SQL (queries)                      â”‚
â”‚ â€¢ LÃ³gica (regras de negÃ³cio)        â”‚
â”‚                                      â”‚
â”‚ Problema: RuÃ­do de UI misturado      â”‚
â”‚ com SQL, difÃ­cil focar               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [VAL] Validar TUDO                   â”‚
â”‚                                      â”‚
â”‚ ValidaÃ§Ã£o heurÃ­stica genÃ©rica        â”‚
â”‚ Sem cruzamento especÃ­fico SQL        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ANA] Analisar TUDO                  â”‚
â”‚                                      â”‚
â”‚ AnÃ¡lise genÃ©rica                     â”‚
â”‚ DifÃ­cil rastrear linhagem SQL        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DEPOIS (Trilha SQL Especializada)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [EXT-SQL] Extrair APENAS SQL         â”‚
â”‚                                      â”‚
â”‚ âœ… EXEC SQL, CURSOR, INSERT, UPDATE  â”‚
â”‚ âŒ Ignora UI, Cores, Layouts         â”‚
â”‚ ğŸ†• affected_tables                   â”‚
â”‚ ğŸ†• operation_type                    â”‚
â”‚                                      â”‚
â”‚ Vantagem: Foco cirÃºrgico 100% SQL   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [VAL-SQL] Validar SQL vs VAMAP       â”‚
â”‚                                      â”‚
â”‚ Cruzamento IA Ã— VAMAP                â”‚
â”‚ (DATA DIVISION / SQLCA)              â”‚
â”‚                                      â”‚
â”‚ â€¢ Detectar omissÃµes                  â”‚
â”‚ â€¢ Detectar alucinaÃ§Ãµes               â”‚
â”‚ â€¢ Conformidade 100%                  â”‚
â”‚                                      â”‚
â”‚ Vantagem: ValidaÃ§Ã£o autoritativa     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ANA-SQL] Analisar SQL + Linhagem    â”‚
â”‚                                      â”‚
â”‚ â€¢ database_schema.sql (DDL moderno)  â”‚
â”‚ â€¢ data_lineage_report.md (linhagem)  â”‚
â”‚ â€¢ sql_risk_matrix.csv (riscos)       â”‚
â”‚ â€¢ table_dependencies_graph.json      â”‚
â”‚                                      â”‚
â”‚ Vantagem: Rastreamento completo      â”‚
â”‚ LÃ³gica â†’ Query â†’ Tabela              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Legenda de SÃ­mbolos

| SÃ­mbolo | Significado |
|---------|-------------|
| âœ… | Implementado / Sucesso |
| âŒ | Ignorado / Falha |
| ğŸ†• | Novo campo/funcionalidade |
| ğŸ”´ | Risco HIGH |
| ğŸŸ¡ | Risco MEDIUM |
| ğŸŸ¢ | Risco LOW |
| â† | Novo (adicionado) |
| â†’ | Fluxo de dados |
| â†“ | PrÃ³ximo passo |

---

**VersÃ£o**: 1.0  
**Data**: 2025-12-28  
**Autor**: BMad Method v6.0


